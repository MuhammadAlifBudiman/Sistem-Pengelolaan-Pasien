<!DOCTYPE html>
<html>
  <head>
    <title>Klinik Google Login</title>

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css')}}"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>

    <script>
      $(document).ready(function () {
        $("#loginForm").on("submit", function (e) {
          e.preventDefault();
          sign_in();
        });
      });
      function sign_in() {
        let username = $("#username").val(); // Update this line
        let password = $("#password").val(); // Update this line

        if (username === "") {
          $("#help-id-login").text("Please input your id.");
          $("#username").focus(); // Update this line
          return;
        } else {
          $("#help-id-login").text("");
        }

        if (password === "") {
          $("#help-password").text("Please input your password.");
          $("#password").focus(); // Update this line
          return;
        } else {
          $("#help-password-login").text("");
        }

        $.ajax({
          type: "POST",
          url: "/sign_in",
          data: {
            username_give: username,
            password_give: password,
          },
          success: function (response) {
            if (response["result"] === "success") {
              $.cookie("mytoken", response["token"], { path: "/" });
              window.location.replace("/");
            } else {
              alert(response["msg"]);
            }
          },
        });
      }
    </script>
  </head>
  <body>
    <div class="container">
      <h2>Login</h2>
      <form id="loginForm">
        <input
          type="text"
          id="username"
          name="username"
          placeholder="Username"
          required
        />
        <input
          type="password"
          id="password"
          name="password"
          placeholder="Password"
          required
        />
        <button type="submit">Login</button>
      </form>
      <p>Belum Punya akun? <a href="/register">Klik Disini</a></p>
    </div>
  </body>
</html>
